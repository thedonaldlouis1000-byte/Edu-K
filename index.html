<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<!-- THE SEARCH ENGINE TITLE -->
<title>Edu-k 2026 | Fun ABC & 123 Learning for Kids</title>
<meta name="description" content="Edu-k 2026 is a free, safe educational app created by Louis Donald for kids to master ABCs and 123s through music and tracing.">
<meta name="author" content="Louis Donald">

<!-- THE WHATSAPP & SOCIAL PREVIEW (Absolute Links) -->
<meta property="og:type" content="website">
<meta property="og:title" content="Edu-k: Learning is Fun! üé®">
<meta property="og:description" content="Master ABCs and 123s with music. Built by 17-year-old developer Louis Donald.">
<meta property="og:url" content="https://louis-edu-k-2026.netlify.app">

<!-- CRITICAL: This MUST be the full https link to the image -->
<meta property="og:image" content="https://louis-edu-k-2026.netlify.appimage/boy-cartoon-character-running.jpg">
<meta property="og:image:type" content="image/jpeg">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">

<link href="https://fonts.googleapis.com" rel="stylesheet">

 <style>
        :root {
            --primary: #FF6B6B;
            --secondary: #4ECDC4;
            --accent: #FFE66D;
            --white: #FFFFFF;
        }

        body {
            font-family: 'Quicksand', sans-serif;
            margin: 0;
            background: linear-gradient(-45deg, #f0faff, #e0f2fe, #fff5f5, #fef9c3);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

   /* --- THE SELECTIVE DARK MODE --- */

/* 1. The Main Background */
body.dark-theme { 
    background-color: #121212 !important; 
}

/* 2. The Navigation Bar & Pages */
body.dark-theme nav, 
body.dark-theme .page, 
body.dark-theme .settings-menu {
    background-color: #1e1e1e !important;
    border-color: #333 !important;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5) !important;
}

/* 3. The White Boxes (About, Login, Account, FAQ) */
body.dark-theme #about div, 
body.dark-theme #login div, 
body.dark-theme #account div,
body.dark-theme .faq-item {
    background-color: #2a2a2a !important;
    color: #ffffff !important; /* Forces the black text to white */
    border-color: #444 !important;
}

/* 4. The Navigation Text & General Paragraphs */
body.dark-theme .nav-links span, 
body.dark-theme p, 
body.dark-theme h3,
body.dark-theme label {
    color: #ffffff !important;
}

/* 5. KEEP YOUR PRIMARY COLORS (This stops them from disappearing) */
body.dark-theme h1, 
body.dark-theme h2, 
body.dark-theme h4,
body.dark-theme .item-card {
    /* We DON'T force color here so your Primary/Secondary colors stay bright! */
}

/* 1. This forces the ENTIRE screen to go dark */
body.dark-theme {
    background-color: #121212 !important; 
    background-image: none !important; /* Removes any light gradients */
}

/* 2. This ensures EVERY page fills the screen with dark color */
body.dark-theme .page {
    background-color: #121212 !important;
    min-height: 100vh; /* Ensures it covers the bottom of the screen */
}

/* 3. This fixes the 'About' and 'Account' white boxes */
body.dark-theme #about div, 
body.dark-theme #account div,
body.dark-theme #login div {
    background-color: #1e1e1e !important;
    color: #ffffff !important;
    box-shadow: 0 10px 30px rgba(0,0,0,0.4) !important;
}

body.dark-theme nav {
    background-color: #1a1a1a !important;
    border-bottom: 1px solid #333 !important;
}

/* --- WELCOME MESSAGE VISIBILITY --- */
body.dark-theme #welcome-message {
    color: #ffffff !important; /* Pure white for the 'Welcome' title */
    text-shadow: 2px 2px 10px rgba(0,0,0,0.5); /* Adds depth */
}

body.dark-theme #welcome-subtext {
    color: #4ECDC4 !important; /* Bright Mint for the sub-instruction */
    font-weight: bold;
}

/* Also fix the 'Founded by Louis' text visibility */
body.dark-theme #home h3 {
    color: #ffffff !important;
}
/* --- DARK MODE ACCOUNT FIX --- */
body.dark-theme #account div {
    background: #1e1e1e !important;
    border-color: #333 !important;
    color: #ffffff !important;
}

body.dark-theme #acc-num {
    color: #22e08e !important; /* Makes the number OPay Green so it pops! */
    font-weight: bold;
}

body.dark-theme #account strong {
    color: #ffffff !important;
}

body.dark-theme #account p {
    color: #cccccc !important;
}


/* --- DARK MODE NAVIGATION TEXT --- */
body.dark-theme .nav-links span {
    color: var(--primary) !important; /* Keep the Edu-k Red */
    background: #2a2a2a !important;   /* Darker button background */
    border-color: var(--secondary) !important; /* Keep the Edu-k Mint Border */
}

/* When the child hovers over a Nav button in Dark Mode */
body.dark-theme .nav-links span:hover {
    background: var(--secondary) !important;
    color: #121212 !important; /* Black text on Mint background for high contrast */
    transform: scale(1.1);
}

/* Fix the Logo (Edu-K title) */
body.dark-theme .logo {
    color: var(--primary) !important;
    text-shadow: 1px 1px var(--accent), 0 0 10px rgba(255, 107, 107, 0.4);
}

/* Fix the Gear Icon (Settings Button) */
body.dark-theme .settings-btn {
    color: var(--secondary) !important;
}



        /* NAVIGATION & SETTINGS */
        nav {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 10px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 9999;
            border-bottom: 3px solid var(--secondary);
        }

        .nav-left { display: flex; align-items: center; gap: 15px; }
        .logo { font-family: 'Fredoka One', cursive; color: var(--primary); font-size: clamp(1.2rem, 4vw, 1.8rem); text-shadow: 1px 1px var(--accent); }

          /* SETTINGS STYLING */
        .settings-container { position: relative; }

        .settings-btn { 
            font-size: 1.8rem; 
            cursor: pointer; 
            display: inline-block; 
            transition: 0.3s; 
        }

        .settings-btn:hover { 
            transform: rotate(90deg); 
        }

        .settings-menu {
            display: none;
            position: absolute;
            top: 50px;
            left: 0;
            background: white;
            min-width: 220px;
            max-height: 500px;
            overflow-y: auto;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            border-radius: 15px;
            padding: 15px;
            text-align: left; /* Added to keep text neat */
            z-index: 10000;
        }

        .settings-menu h4 { 
            margin: 10px 0 5px; 
            color: var(--primary); 
            border-bottom: 1px solid #eee; 
            font-family: 'Fredoka One', cursive;
        }

        /* This styles your About, Support, and App links */
        .settings-menu a, .settings-menu p { 
            font-size: 0.9rem; 
            color: #555; 
            margin: 10px 0; 
            cursor: pointer; 
            text-decoration: none; 
            display: block; 
            transition: 0.2s;
        }

        .settings-menu a:hover { 
            color: var(--secondary); 
            padding-left: 5px; /* Subtle slide effect on hover */
        }


        .nav-links { 
            display: flex; 
            gap: 8px;
            flex-wrap: wrap;
            justify-content: center;
         }
        .nav-links span {
            cursor: pointer;
            font-weight: bold;
            font-size: clamp(0.7rem, 2.5vw, 0.9rem);
            background: var(--white);
            padding: 8px 12px;
            border-radius: 12px;
            border: 2px solid var(--secondary);
            transition: 0.3s;
        }
        .nav-links span:hover { background: var(--primary); color: white; transform: scale(1.1); }
        @media (max-width:480px){
            .item-card{
                font-size: 1.5rem;
            } .nav-links span{
                font-size: 0.8rem;
            }
        }

        /* JUBILATION CONFETTI */
        #confetti-container {
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            pointer-events: none;
            z-index: 10001;
        }
        .piece { position: absolute; width: 12px; height: 12px; opacity: 0; }
        @keyframes jubilate {
            0% { transform: translateY(0) rotate(0deg) scale(0); opacity: 1; }
            20% { transform: translateY(-20vh) rotate(180deg) scale(1.2); }
            100% { transform: translateY(100vh) rotate(720deg) scale(0.5); opacity: 0; }
        }
        /* Animation for the fading lock */
.fade-out-lock {
    animation: fadeAndSlide 0.8s forwards;
    pointer-events: none;
}

@keyframes fadeAndSlide {
    0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    100% { transform: translate(-50%, -100%) scale(1.5); opacity: 0; }
}

body.dark-theme #tracing-page { background: #121212 !important; }
body.dark-theme #ghost-char { color: #333 !important; } /* Dark grey ghost on black background */
body.dark-theme #paintCanvas { border-color: #444; }

.trace-btn {
    background: var(--primary);
    color: white;
    border: none;
    padding: 15px 30px;
    border-radius: 50px;
    font-size: 1.2rem;
    font-family: 'Fredoka One';
    margin-top: 20px;
    cursor: pointer;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}
@keyframes pencilTrace {
    0% { transform: translate(150px, 100px); opacity: 0; } /* Top of A */
    10% { opacity: 1; }
    40% { transform: translate(100px, 350px); } /* Left leg */
    50% { transform: translate(150px, 100px); } /* Back to top */
    80% { transform: translate(200px, 350px); } /* Right leg */
    100% { transform: translate(200px, 350px); opacity: 0; }
}

#pencil-guide {
    position: absolute;
    font-size: 40px;
    z-index: 100;
    pointer-events: none;
    display: none;
    animation: pencilTrace 4s infinite ease-in-out;
}

/* Dark Mode visibility for the Ghost Letter */
body.dark-theme #ghost-char {
    color: #222 !important; /* Very subtle grey against black */
    text-shadow: 0 0 5px rgba(78, 205, 196, 0.2);
}
/* Styling for the Mascot Button */
#got-it-btn {
    transition: transform 0.2s, background 0.2s;
    box-shadow: 0 4px 10px rgba(78, 205, 196, 0.3);
}

#got-it-btn:hover {
    transform: scale(1.05);
    background: var(--primary) !important; /* Turns Red when hovered */
}

/* Dark Mode Fix for the Button */
body.dark-theme #got-it-btn {
    background: var(--secondary) !important;
    color: #121212 !important;
}


        /* GRID & CARDS */
        .page { display: none; padding: 20px; text-align: center; }
        .active { display: block; animation: zoomIn 0.5s; }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 15px;
            max-width: 1000px;
            margin: 20px auto;
            padding: 0 20px;
        }

        .item-card {
            background: white;
            border-bottom: 6px solid var(--secondary);
            border-radius: 20px;
            aspect-ratio: 1/1;
            display: flex; align-items: center; justify-content: center;
            font-size: 2.5rem; font-family: 'Fredoka One', cursive;
            cursor: pointer; transition: 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .item-card:hover { transform: scale(1.1) rotate(3deg); background: var(--accent); }

         .rhyme-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; padding: 0 20px; }
        .rhyme-card { width: 160px; background: white; border-radius: 20px; padding: 10px; cursor: pointer; }
        .rhyme-card img { width: 100%; border-radius: 15px; }
#star-counter {
    position: fixed; 
    top: 100px; /* WAS 80px - Moved down to avoid Nav Bar */
    right: 20px;
    background: var(--accent); 
    padding: 10px 20px; 
    border-radius: 50px;
    font-family: 'Fredoka One', cursive; 
    z-index: 1000; /* Keeps it above the page but below the Nav if needed */
    display: flex; 
    align-items: center; 
    gap: 10px; 
    border: 3px solid var(--white);
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}


        .rhyme-card.locked { position: relative; }
.rhyme-card.locked img { filter: grayscale(1) blur(1px); opacity: 0.6; }
.lock-bubble {
    position: absolute; top: 40%; left: 50%; transform: translate(-50%, -50%);
    background: var(--primary); color: white; padding: 5px 12px;
    border-radius: 15px; font-weight: bold; font-size: 0.9rem; z-index: 5;
}
.rhyme-card.locked:hover { transform: none; }

/* --- RHYME TEXT DARK MODE FIX --- */
body.dark-theme .rhyme-card p {
    color: #ffffff !important; /* Forces the text to white */
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5); /* Makes it pop */
}

/* Fix for the locked rhyme text specifically */
body.dark-theme .rhyme-card.locked p {
    color: #cccccc !important; /* Slightly dimmer white for locked items */
}

   /* THE STORY CARD STYLES */
.story-card {
    position: relative;
    cursor: pointer;
    text-align: center;
    transition: transform 0.3s;
}

.story-card:hover {
    transform: scale(1.05); /* Bounces slightly when touched */
}

/* Locked State: Grey and blurry */
.story-card.locked img {
    filter: grayscale(1) blur(1px);
    opacity: 0.7;
}

/* The üîí 30 Bubble */
.lock-overlay {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 8px 15px;
    border-radius: 20px;
    font-weight: bold;
    font-size: 1.2rem;
    z-index: 5;
    pointer-events: none;
}

/* Unlocked State: Bright and colorful */
.story-card.unlocked img {
    filter: none;
    opacity: 1;
    border: 3px solid var(--accent);
}

.story-card.unlocked .lock-overlay {
    display: none; /* Hides the lock once paid */
}

        /* THE BOX: Keeps 3D effect "Caged" */
.book-container {
    perspective: 1000px !important; 
    width: 160px;
    height: 100px;
    margin: 40px auto;
    position: relative;
    transform-style: preserve-3d;
}

.leaf {
    position: absolute;
    right: 0; 
    top: 5px;
    width: 75px; 
    height: 90px;
    background: white;
    border: 1px solid #ddd;
    border-radius: 0 5px 5px 0;
    transform-origin: left center; 
    /* Important for realistic flipping */
    backface-visibility: visible;
    transition: transform 0.5s;
}

/* Staggered Flip - Pages land on the other side and STAY there */
.leaf-1 { animation: flipSheet 4s ease-in-out infinite 0.2s; z-index: 5; }
.leaf-2 { animation: flipSheet 4s ease-in-out infinite 0.6s; z-index: 4; }
.leaf-3 { animation: flipSheet 4s ease-in-out infinite 1.0s; z-index: 3; }

@keyframes flipSheet {
    0% { transform: rotateY(0deg); z-index: 5; }
    40% { transform: rotateY(-180deg); z-index: 5; }
    /* The pause at the end lets them stay on the left side longer */
    100% { transform: rotateY(-180deg); z-index: 5; }
}
#profile-logout-section button {
    position: relative;
    z-index: 999;
    pointer-events: auto !important;
}

/* THE CAGE: Keeps loader separated */
#loader-screen {
    position: fixed !important;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    display: flex; flex-direction: column;
    align-items: center; justify-content: center;
    z-index: 999999 !important;
    background: linear-gradient(-45deg, #f0faff, #e0f2fe, #fff5f5, #fef9c3);
    pointer-events: all;
}
/* LIGHT MODE (Default) */
.quote-box {
    background: #fffde7;
    color: #555;
}

/* DARK MODE (Automatic Fix) */
body.dark-theme .quote-box {
    background: #2a2a40 !important; /* Deep Dark Blue/Purple */
    color: #eeeeee !important;      /* Off-White text */
    border-left-color: var(--accent) !important;
}


@keyframes mascotBounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}
/* --- DARK MODE LABEL RECOVERY --- */
body.dark-theme #account strong {
    color: #ffffff !important; /* Forces labels to White */
    font-weight: 900 !important;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5); /* Makes it sharp */
    display: inline-block;
}

/* Fix for the general text in the support box */
body.dark-theme #account p {
    color: #eeeeee !important; /* Light grey for regular text */
}

/* Ensure the white background box turns dark so white text shows */
body.dark-theme #account div {
    background-color: #121212 !important;
    border-color: var(--secondary) !important;
}


/* DARK MODE TRACING */
body.dark-theme #tracing-page { background: #121212 !important; }
body.dark-theme #trace-container { background: #1a1a1a; border-color: #333; }
body.dark-theme #ghost-char { color: #2a2a2a !important; } /* Subtle dark grey */
body.dark-theme #instructor-hint { color: var(--accent) !important; }

/* PENCIL ANIMATION */
@keyframes guideMove {
    0% { top: 20%; left: 30%; opacity: 0; }
    20% { opacity: 1; }
    50% { top: 50%; left: 70%; }
    80% { opacity: 1; }
    100% { top: 80%; left: 40%; opacity: 0; }
}
#pencil-guide {
    position: absolute;
    font-size: 40px;
    z-index: 10;
    pointer-events: none;
    display: none;
    transition: all 0.3s ease;
}

#ceo-mascot-box {
    animation: mascotBounce 3s infinite ease-in-out;
}
/* --- STORY READER DARK MODE --- */
body.dark-theme #storyReader {
    background-color: #1e1e1e !important; /* Dark Grey box */
    border-color: var(--secondary) !important;
    box-shadow: 0 10px 30px rgba(0,0,0,0.8);
}

body.dark-theme #readerTitle {
    color: var(--primary) !important; /* Bright Mint/Red title */
}

body.dark-theme #readerBody {
    color: #ffffff !important; /* Pure white text for the story */
}

/* Ensure the 'Close' button is visible */
body.dark-theme #storyReader button {
    background: var(--secondary) !important;
    color: #121212 !important;
    font-weight: bold;
}
/* --- THE CEO ACCOUNT NUMBER FIX --- */
body.dark-theme #acc-num {
    color: #22e08e !important; /* Bright OPay Green */
    background: transparent !important;
    display: inline-block !important;
    visibility: visible !important;
    opacity: 1 !important;
    font-weight: 800 !important;
}

/* Ensure the box behind the number doesn't swallow it */
body.dark-theme #account .page-content, 
body.dark-theme #account div {
    background-color: #1a1a1a !important;
    color: #ffffff !important;
}

/* Make the 'Account No:' label white so it's not lost */
body.dark-theme #account strong {
    color: #ffffff !important;
}

/* --- THE CEO FOOTER UPGRADE --- */
.heart-pulse {
    display: inline-block;
    color: #ff6b6b;
    animation: heartBeat 1.5s infinite;
}

@keyframes heartBeat {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

/* Dark Mode Footer Fix */
body.dark-theme footer {
    background: rgba(30, 30, 30, 0.8) !important;
    border-top-color: var(--secondary) !important;
}

body.dark-theme footer p {
    color: #bbb !important;
}

body.dark-theme footer h3 {
    color: var(--primary) !important;
}


/* --- DARK MODE FOR MASCOT & STORIES --- */

/* 1. The Mascot Message Box */
body.dark-theme #ceo-mascot-box {
    background: #1e1e1e !important; /* Dark Grey */
    border: 4px solid var(--secondary) !important;
    color: #ffffff !important;
    box-shadow: 0 10px 30px rgba(0,0,0,0.8) !important;
}

body.dark-theme #ceo-mascot-box p, 
body.dark-theme #ceo-mascot-box b, 
body.dark-theme #ceo-mascot-box h4 {
    color: #ffffff !important; /* Forces all mascot text to white */
}

/* 2. The Bedtime Story Reader */
body.dark-theme #storyReader {
    background: #1a1a2e !important; /* Deep Midnight Blue */
    border: 3px solid var(--secondary) !important;
    box-shadow: 0 0 20px rgba(78, 205, 196, 0.2);
}

body.dark-theme #readerTitle {
    color: var(--primary) !important; /* Keeps the title colorful but bright */
}

body.dark-theme #readerBody {
    color: #e0e0e0 !important; /* Soft white for easy reading at night */
}

/* 3. The "Stay & Play" Button in Dark Mode */
body.dark-theme #cancel-logout {
    background: #333 !important;
    border: 1px solid #555 !important;
}
body.dark-theme #legal-page div {
    background: #1e1e1e !important;
    border-color: var(--secondary) !important;
}
body.dark-theme #legal-page p, body.dark-theme #legal-page h4 {
    color: #ffffff !important;
}

#storiesGrid, .story-card {
    pointer-events: auto !important; /* Forces the browser to listen to your touch */
    position: relative;
    z-index: 500;
}

#storyReader {
    z-index: 9999 !important; /* Ensures the book opens ON TOP of everything */
}

        .bubble { position: fixed; background: rgba(255, 255, 255, 0.4); border-radius: 50%; z-index: -1; animation: floatUp 8s infinite; }
        @keyframes floatUp { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-40px); } }
        @keyframes zoomIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        footer { background: #333; color: white; padding: 15px; text-align: center; margin-top: auto; }
    </style>


</head>
<body onclick="handleFirstClick()" ontouchstart="handleFirstClick()">
   <!-- THE MAIN LOADER BOX (Hides everything behind it) -->
<div id="loader-screen" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: linear-gradient(-45deg, #f0faff, #e0f2fe, #fff5f5, #fef9c3); background-size: 400% 400%; z-index: 999999; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center;">
    
    <!-- Title -->
    <h1 style="font-family: 'Fredoka One', cursive; color: var(--primary); font-size: 4rem; margin-bottom: 10px; text-shadow: 2px 2px var(--accent);">Edu-k</h1>

    <div id="book-box" style="width: 160px; height: 100px; margin: 20px auto; position: relative; perspective: 1000px;">
    <!-- The Back Cover (Right Side) -->
    <div style="position: absolute; right: 0; width: 80px; height: 100px; background: var(--primary); border-radius: 0 5px 5px 0; box-shadow: 2px 5px 10px rgba(0,0,0,0.1); z-index: 1;"></div>
    
    <!-- The Flipping Pages (Stacked) -->
    <div class="leaf leaf-1"></div>
    <div class="leaf leaf-2"></div>
    <div class="leaf leaf-3"></div>
    
    <!-- The Front Cover (Fixed Left) - LOWER Z-INDEX SO PAGES LAND ON TOP -->
    <div style="position: absolute; left: 0; width: 80px; height: 100px; background: var(--primary); border-radius: 5px 0 0 5px; box-shadow: -2px 5px 10px rgba(0,0,0,0.1); z-index: 1;"></div>
</div>

    
    <!-- Motto -->
    <h2 style="font-family: 'Quicksand', sans-serif; color: var(--secondary); margin-top: 20px;">Learning is Fun!</h2>

    <!-- Percentage & Version (Fixed at the bottom) -->
    <div style="position: absolute; bottom: 50px; width: 100%;">
        <div id="loader-percent" style="font-size: 2.5rem; font-family: 'Fredoka One'; color: var(--primary); font-weight: bold;">0%</div>
        <div style="width: 200px; height: 10px; background: #eee; border-radius: 10px; margin: 10px auto; overflow: hidden;">
            <div id="loader-bar" style="width: 0%; height: 100%; background: var(--secondary); transition: 0.1s;"></div>
        </div>
        <p style="font-size: 0.8rem; color: #888; margin-top: 10px;">Version 1.0.2</p>
    </div>
</div> <!-- END OF LOADER SCREEN -->



<div id="confetti-container"></div>

<div id="star-counter">
    <span style="font-size: 1.5rem;">‚≠ê</span>
    <span id="star-count">0</span>
</div>

<div class="bubble" style="width: 100px; height: 100px; top: 20%; left: 5%;"></div>
<div class="bubble" style="width: 150px; height: 150px; bottom: 10%; right: 5%;"></div>

<audio id="bg-music" loop>
    <source src="sounds/mr_clown.mp3" type="audio/mpeg">
</audio>



<nav>
    <div class="nav-left">
        <div class="settings-container">
            <span class="settings-btn" onclick="playClick(); toggleSettings(event)">‚öôÔ∏è</span>
        <div id="settingsMenu" class="settings-menu" onclick="event.stopPropagation()"style="padding: 20px; min-width: 260px;">
    <!-- 1. AUDIO CONTROLS -->
    <h4 style="font-family: 'Fredoka One'; color: var(--primary); margin-bottom: 10px;">Audio & Music</h4>
    <label style="cursor:pointer; font-size: 0.9rem; display: block; margin-bottom: 10px;">
        <input type="checkbox" id="musicToggle" checked onchange="toggleMusic()"> üéµ Background Music
    </label>

    <!-- Volume Control for ABCs & 123s -->
<h4 style="font-family: 'Fredoka One'; color: var(--primary); margin-top: 15px;">Game Volume</h4>
<input type="range" id="gameVolume" min="0" max="1" step="0.1" value="1" oninput="updateGameVolume()" style="width: 100%; cursor: pointer; accent-color: var(--secondary);">
<p id="volumeLabel" style="font-size: 0.8rem; color: #666; text-align: center;">Volume: 100%</p>

<!-- Notification Toggle -->
<h4 style="font-family: 'Fredoka One'; color: var(--primary); margin-top: 15px;">Reminders</h4>
<label style="display: flex; align-items: center; cursor: pointer; font-size: 0.9rem; gap: 10px;">
    <input type="checkbox" id="notifToggle" onchange="setupNotifications()"> üîî Play Reminders
</label>
<p id="notifStatus" style="font-size: 0.7rem; color: #888; margin-top: 5px;">Get a nudge when it's time to learn!</p>


    <!-- 2. NEW: DISPLAY & EYE CARE -->
    <h4 style="font-family: 'Fredoka One'; color: var(--primary); margin-top: 15px;">Display</h4>
    <label style="cursor:pointer; font-size: 0.9rem; display: block; margin-bottom: 10px;">
        <input type="checkbox" id="darkModeToggle" onchange="toggleDarkMode()"> üåô Dark Mode (Eye Care)
    </label>

    <!-- 3. NEW: LANGUAGE SELECT -->
    <h4 style="font-family: 'Fredoka One'; color: var(--primary); margin-top: 15px;">Language</h4>
   <select id="languageSelect" onchange="changeLanguage()">
    <option value="en">English üá¨üáß</option>
    <option value="fr">Fran√ßais üá´üá∑</option>
    <option value="es">Espa√±ol üá™üá∏</option>
</select>

    <!-- 4. ABOUT & FAQS -->
    <h4 style="font-family: 'Fredoka One'; color: var(--primary); margin-top: 15px;">Help & Info</h4>
    <a onclick="showPage('about')" style="display:block; margin: 5px 0; cursor:pointer;">About Edu-k</a>
    <a onclick="showPage('faq')" style="display:block; margin: 5px 0; cursor:pointer;">Help & FAQs</a>
    <p onclick="showPage('legal-page')">üìú Terms & Privacy</p>
    <p onclick="showPage('account')" style="cursor: pointer; color: var(--secondary); font-weight: bold; margin-top: 10px;">Support the Developer üíö</p>

    <!-- 5. CONTACT LOUIS -->
    <h4 style="font-family: 'Fredoka One'; color: var(--primary); margin-top: 15px;">Contact Louis</h4>
    <a href="tel:+2347046029852" style="display:block; color: #444; text-decoration:none; margin-bottom:5px;">üìû Call: 07046029852</a>
    <a href="https://wa.me/07046029852" target="_blank" style="display:block; color: #25D366; text-decoration:none; margin-bottom:5px;">üí¨ WhatsApp Me</a>
    <a href="mailto:thedonaldlouis1000@gmail.com" style="display:block; color: #E4405F; text-decoration:none;">üìß Email Support</a>
 <h4 style="font-family: 'Fredoka One'; color: var(--primary); margin-top: 15px;">More projects!</h4>
  <a href="https://github.com/thedonaldlouis1000-byte?tab=projects" style="display:block; color: #444; text-decoration:none; margin-bottom:5px;">Louis github projects</a>
    <hr style="border: 0.5px solid #eee; margin: 15px 0;">
    <p onclick="event.stopPropagation(); handleLogout();" style="color: #ff6b6b; font-weight: bold; cursor: pointer;">Logout üö™</p>
</div>


</div>

        </div>
        <div class="logo">Edu-k</div>
    </div>
<div class="nav-links">
    <!-- Wrap the page change AND the sound together -->
    <span onclick="playClick(); showPage('home')">Home</span>
    <span onclick="playClick(); showPage('abc')">ABCs</span>
    <span onclick="playClick(); showPage('123')">123</span>
    <span onclick="playClick(); showPage('rhymes')">Rhymesüéµ</span>
    <span onclick="playClick(); showPage('stories')">Bedtime üåô</span>
    <span onclick="playClick(); showPage('login')" id="login-nav-btn">Login üë§</span>
</div>

</nav>


  <!-- Look for this section -->
<div id="home" class="page active">
    
    <!-- PASTE THESE TWO LINES HERE -->
    <h1 id="welcome-message">Hello Little Learner!</h1>
    <p id="welcome-subtext">Tap a button at the top to start your journey!</p>

    <!-- Keep your boy cartoon image and CEO text below them -->
    <img src="image/boy-cartoon-character-running.jpg" width="200" style="border-radius:20px; margin: 20px 0;">
    <h3>Founded by Louis Donald</h3>
    

    <!-- Inside <div id="home" class="page active"> -->
 <div style="float: right; width: 300px; padding: 20px; background: #fff; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); margin-left: 20px;">
      <h4 style="font-family: 'Fredoka One'; color: var(--primary);">Questions?</h4>
      <input type="text" id="homeSearchInput" placeholder="Search FAQs..." 
           style="width: 100%; padding: 10px; border-radius: 25px; border: 2px solid var(--secondary); outline: none;">
      <button onclick="goToFAQ()" 
             style="margin-top: 10px; width: 100%; background: var(--secondary); color: white; border: none; padding: 10px; border-radius: 25px; font-weight: bold; cursor: pointer;">
            Search FAQ
     </button>
 </div>

</div>

<!-- THE ABC PAGE -->
<div id="abc" class="page">
    <h2 style="font-family: 'Fredoka One'; color: var(--primary);">ABC Alphabet</h2>
    <div class="grid" id="abcGrid">
        <!-- Letters are generated here by JS -->
    </div>
    
    <!-- ADD BUTTON HERE - AT THE BOTTOM OF THE PAGE -->
    <button onclick="openTracing('ABC')" class="trace-btn" style="margin-top: 30px; margin-bottom: 20px;">‚úçÔ∏è Trace Letters</button>
</div>

<!-- THE 123 PAGE -->
<div id="123" class="page">
    <h2 style="font-family: 'Fredoka One'; color: var(--primary);">1-10 Numbers</h2>
    <div class="grid" id="numGrid">
        <!-- Numbers are generated here by JS -->
    </div>

    <!-- ADD BUTTON HERE - AT THE BOTTOM OF THE PAGE -->
    <button onclick="openTracing('123')" class="trace-btn" style="margin-top: 30px; margin-bottom: 20px;">‚úçÔ∏è Trace Numbers</button>
</div>

<div id="rhymes" class="page">
    <h2 style="font-family: 'Fredoka One'; color: var(--primary);">Music & Rhymes üéµ</h2>
    
    <!-- SECTION 1: FREE RHYMES -->
    <div class="rhyme-container">
        <div class="rhyme-card" onclick="playClick(); playRhyme('rhyme1')"><img src="image/star.jpg"><p>Twinkle Twinkle Little Star</p></div>
        <div class="rhyme-card" onclick="playClick(); playRhyme('rhyme2')"><img src="image/school bus.jpg"><p>Wheels On The Bus</p></div>
        <div class="rhyme-card" onclick="playClick(); playRhyme('rhyme3')"><img src="image/old mac donald.jpg"><p>Old MacDonald</p></div>
        <div class="rhyme-card" onclick="playClick(); playRhyme('rhyme4')"><img src="image/london bridge.jpg"><p>London Bridge</p></div>
        <div class="rhyme-card" onclick="playClick(); playRhyme('rhyme5')"><img src="image/ABC.jpg"><p>Learn ABC</p></div>
        <div class="rhyme-card" onclick="playClick(); playRhyme('rhyme6')"><img src="image/spider.jpg"><p>Itsy Bitsy Spider</p></div>

        <!-- SECTION 2: LOCKED RHYMES (10 Stars Each) -->
        <!-- Add your new songs here -->
         <!-- Rhyme 7 -->
      <div class="rhyme-card locked" id="rhyme7" onclick="tryUnlockRhyme('rhyme7', 'rhyme7')">
         <div class="lock-bubble">üîí 10</div>
         <img src="image/number.jpg"><p>Count 1 to 20</p>
      </div>
    <!-- Rhyme 8 -->
      <div class="rhyme-card locked" id="rhyme8" onclick="tryUnlockRhyme('rhyme8', 'rhyme8')">
         <div class="lock-bubble">üîí 10</div>
         <img src="image/body.jpg"><p>Head Shoulders Knees and Toes</p>
      </div>
    <!-- Rhyme 9 -->
       <div class="rhyme-card locked" id="rhyme9" onclick="tryUnlockRhyme('rhyme9', 'rhyme9')">
          <div class="lock-bubble">üîí 10</div>
          <img src="image/duck.jpg"><p>Five Little Ducks</p>
       </div>
    <!-- Rhyme 10 -->
       <div class="rhyme-card locked" id="rhyme10" onclick="tryUnlockRhyme('rhyme10', 'rhyme10')">
          <div class="lock-bubble">üîí 10</div>
          <img src="image/rain.jpg"><p>Rain Rain Go Away</p>
       </div>
    </div>
</div>
</div>

<!-- 1. THE LOGIN PAGE (Separated) -->
<div id="login" class="page">
    <div style="max-width: 450px; margin: 0 auto; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">
        <h2 id="login-title" style="font-family: 'Fredoka One'; color: var(--primary);">Join the Family!</h2>
        
        <form id="loginForm" action="https://formspree.io/f/xwvqjzqw" method="POST">
            <div id="profile-fields">
                <input type="text" name="name" id="userName" placeholder="Child's Name" required style="width: 100%; padding: 12px; margin: 10px 0; border-radius: 10px; border: 2px solid #eee;">
                <p style="text-align:left; margin: 5px 0; font-size: 0.8rem; color: #666;">Birthday:</p>
                <input type="date" name="birthday" id="userBirthday" style="width: 100%; padding: 12px; margin: 5px 0; border-radius: 10px; border: 2px solid #eee;">
                <p style="text-align:left; margin: 10px 0 5px; font-size: 0.8rem; color: #666;">Upload Profile Picture:</p>
                <input type="file" id="userPhoto" accept="image/*" style="font-size: 0.8rem;">
                <input type="email" name="email" id="userEmail" placeholder="Parent's Email" required style="width: 100%; padding: 12px; margin: 10px 0; border-radius: 10px; border: 2px solid #eee;">
            </div>

            <div id="logged-in-profile" style="display:none;">
                <img id="display-photo" src="" style="width:100px; height:100px; border-radius:50%; object-fit:cover; border: 3px solid var(--secondary);">
                <h3 id="display-name"></h3>
                <p id="display-bday"></p>
                <button type="button" onclick="playClick(); enableProfileEdit()" style="background: var(--accent); color: #333; border: none; padding: 10px 20px; border-radius: 50px; font-weight: bold; cursor: pointer; margin-top: 10px;">Edit Profile ‚úèÔ∏è</button>
            </div>

            <button type="submit" id="submit-btn" style="width: 100%; background: var(--secondary); color: white; border: none; padding: 15px; border-radius: 50px; font-weight: bold; cursor: pointer; margin-top: 15px;">Save Profile & Join</button>
            <button type="button" id="cancel-edit-btn" onclick="playClick(); cancelProfileEdit()" style="display: none; width: 100%; background: #ccc; color: white; border: none; padding: 15px; border-radius: 50px; font-weight: bold; cursor: pointer; margin-top: 10px;">Cancel & Go Back ‚ùå</button>
        </form> 

        <div id="profile-logout-section" style="margin-top: 30px; border-top: 2px dashed #eee; padding-top: 20px; display: none;">
            <p style="color: #666; font-size: 0.85rem; margin-bottom: 10px;">Want to switch accounts?</p>
            <button onclick="confirmLogout()" style="background: #ff6b6b; color: white; border: none; padding: 12px 20px; border-radius: 50px; font-weight: bold; cursor: pointer; width: 100%;">üö™ Logout</button>
        </div>
    </div> 
</div> <!-- END LOGIN PAGE -->

<!-- 2. THE STORIES PAGE (Starts fresh) -->
<div id="stories" class="page">
    <h2 style="font-family: 'Fredoka One'; color: var(--primary);">Bedtime Stories üåô</h2>
    <p style="color: #666;">Spend your ‚≠ê Stars to unlock magical stories!</p>
    
    <div id="storiesGrid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 20px; padding: 20px;">
        <div class="story-card locked" id="story1" onclick="tryUnlock('story1')">
            <div class="lock-overlay">üîí 30</div>
            <img src="image/wolf.jpg" style="width: 100%; border-radius: 15px;"><p>The Boy Who Learnt Honesty</p>
        </div>
        <div class="story-card locked" id="story2" onclick="tryUnlock('story2')">
            <div class="lock-overlay">üîí 30</div>
            <img src="image/race.jpg" style="width: 100%; border-radius: 15px;"><p>The Big Race</p>
        </div>
        <div class="story-card locked" id="story3" onclick="tryUnlock('story3')">
            <div class="lock-overlay">üîí 30</div>
            <img src="image/ant.jpg" style="width: 100%; border-radius: 15px;"><p>The Busy Ant</p>
        </div>
        <div class="story-card locked" id="story4" onclick="tryUnlock('story4')">
            <div class="lock-overlay">üîí 30</div>
            <img src="image/princess.jpg" style="width: 100%; border-radius: 15px;"><p>Princess Bed</p>
        </div>
        <div class="story-card locked" id="story5" onclick="tryUnlock('story5')">
            <div class="lock-overlay">üîí 30</div>
            <img src="image/goats.jpg" style="width: 100%; border-radius: 15px;"><p>The Two Goats</p>
        </div>
        <div class="story-card locked" id="story6" onclick="tryUnlock('story6')">
            <div class="lock-overlay">üîí 30</div>
            <img src="image/moon.jpg" style="width: 100%; border-radius: 15px;"><p>Moon & Star</p>
        </div>
    </div>

    <!-- THE STORY READER -->
        <div id="storyReader" style="display:none; background:white; padding:30px; border-radius:20px; margin:20px; border:3px solid var(--secondary); text-align: left; position: relative; z-index: 3000;">
             <h3 id="readerTitle" style="color:var(--primary); font-family: 'Fredoka One';"></h3>
             <p id="readerBody" style="font-size: 1.1rem; line-height: 1.6; color: #444; font-family: 'Quicksand'; white-space: pre-wrap;"></p>
             <p id="readerLesson" style="font-weight: bold; color: var(--secondary); margin-top: 15px; font-style: italic; border-top: 1px solid #eee; padding-top: 10px;"></p>
    <!-- THE REINFORCED CLOSE BUTTON -->
<!-- THE BEAUTIFUL STORY BUTTON -->
           <button onclick="closeStory()" style="background: var(--primary); color: white; border: none; padding: 12px 25px; border-radius: 50px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 20px; font-size: 1rem; transition: 0.3s; box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
              Close Book üìñ
            </button>
      </div>
</div>
<div id="tracing-page" class="page" style="position: relative; background: #fff; overflow: hidden;">
    <!-- EXIT -->
    <button onclick="showPage('abc')" style="position: absolute; top: 15px; left: 15px; background: #ff6b6b; color: white; border: none; padding: 10px; border-radius: 50%; z-index: 100;">‚úñÔ∏è</button>
    
    <h2 id="trace-title" style="font-family: 'Fredoka One'; color: var(--primary);">Trace the Letter</h2>

    <div id="trace-container" style="position: relative; width: 320px; height: 450px; margin: 0 auto; background: #f9f9f9; border: 5px dashed #ddd; border-radius: 20px;">
        <!-- GHOST LETTER -->
        <div id="ghost-char" style="position: absolute; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 280px; font-family: 'Fredoka One'; color: #eeeeee; user-select: none; transition: 0.3s;">A</div>
        
        <!-- THE ANIMATED PENCIL GUIDE -->
        <div id="pencil-guide" style="position: absolute; font-size: 40px; z-index: 10; pointer-events: none; display: none;">‚úèÔ∏è</div>
        
        <!-- CANVAS -->
        <canvas id="paintCanvas" width="320" height="450" style="position: absolute; top: 0; left: 0; z-index: 20; touch-action: none;"></canvas>
    </div>

    <!-- INSTRUCTOR MESSAGE -->
    <div id="instructor-hint" style="margin-top: 15px; font-weight: bold; color: var(--secondary); min-height: 24px;">Follow the lines! ‚úçÔ∏è</div>

    <button onclick="clearCanvas()" style="margin-top: 15px; background: #ddd; color: #333; border: none; padding: 8px 20px; border-radius: 50px;">Reset üßπ</button>
</div>

<div id="legal-page" class="page">
    <h2 style="font-family: 'Fredoka One'; color: var(--primary);">Terms & Privacy üìú</h2>
    <div style="background: white; padding: 20px; border-radius: 20px; text-align: left; max-height: 400px; overflow-y: auto; border: 3px solid var(--secondary); margin-bottom: 20px;">
        <h4 style="color: var(--secondary);">1. Your Privacy</h4>
        <p style="font-size: 0.9rem; color: #555;">Edu-k 2026 does not sell your data. We only save your name and stars on your own device so you can learn better!</p>
        
        <h4 style="color: var(--secondary);">2. Learning Rules</h4>
        <p style="font-size: 0.9rem; color: #555;">Have fun, be kind, and keep practicing your letters and Numbers! And share the web app if you love us.</p>
        
        <h4 style="color: var(--secondary);">3. Member Benefits</h4>
        <p style="font-size: 0.9rem; color: #555;">By creating an account, you can earn unlimited stars and unlock magic stories.</p>
    </div>

    <!-- AGREE TOGGLE -->
    <div style="display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 20px;">
        <input type="checkbox" id="legal-agree" style="transform: scale(1.5); cursor: pointer;">
        <label for="legal-agree" style="font-weight: bold; color: var(--primary);">I agree to the Edu-k Rules</label>
    </div>

    <button onclick="showPage('home')" style="background: var(--secondary); color: white; border: none; padding: 12px 30px; border-radius: 50px; font-weight: bold; cursor: pointer;">Back to Home üè†</button>
</div>



<div id="about" class="page">
    <div style="max-width: 600px; margin: 0 auto; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.05);">
        <h2 style="color: var(--primary); font-family: 'Fredoka One';">About Edu-k</h2>
        <p><strong>Edu-k</strong> was created with a simple mission: to make early learning <strong>joyful, interactive, and accessible</strong> for every child.</p>
        
        <p>We believe that the first steps in education‚Äîlearning the alphabet and numbers‚Äîshould feel like a grand adventure. Through music, cheerful sounds, and interactive play, we help little learners build confidence at their own pace.</p>

        <hr style="border: 1px solid #eee; margin: 20px 0;">
        
        <h3 style="color: var(--secondary);">Meet the Founder</h3>
        <img src="image/Company .jpg" alt="Louis Donald" style="width: 120px; height: 120px; border-radius: 50%; border: 4px solid var(--accent); margin-bottom: 10px;">
        <p><strong>Louis Donald</strong><br>Founder & CEO of Edu-k</p>
        
<p class="quote-box" style="font-style: italic; padding: 15px; border-left: 5px solid var(--accent); border-radius: 10px;">
    "I‚Äôm Louis Donald, a 17-year-old developer with a passion for building a better web. 
    I created Edu-k because I believe learning should feel like a game, not a chore. 
    My vision is to spark curiosity in the next generation, one letter at a time."
</p>

       <a href="https://wa.me/07046029852" target="_blank" style="display: inline-block; background: #25D366; color: white; padding: 10px 20px; border-radius: 50px; text-decoration: none; margin: 5px;">üí¨ WhatsApp</a>
 <!-- SHARE BUTTON -->
<button onclick="shareEduK()" style="display: inline-block; background: var(--secondary); color: white; padding: 10px 20px; border-radius: 50px; border: none; font-weight: bold; cursor: pointer; margin: 5px; box-shadow: 0 4px 10px rgba(78, 205, 196, 0.3);">
    Share with Friends üöÄ
</button>
<button onclick="showPage('legal-page')" style="background: #eee; color: #555; border: none; padding: 8px 15px; border-radius: 50px; margin-top: 10px; cursor: pointer;">View Legal Info</button>

    </div>
</div>
<!-- THE ACCOUNT PAGE (OPay + Copy Function) -->
<div id="account" class="page" style="text-align: center; padding: 40px 20px;">
    <div style="position: relative; max-width: 400px; margin: 0 auto; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border-top: 8px solid #22e08e;">
        
        <!-- OPAY LOGO -->
        <img src="image/opay.jpeg" alt="OPay Logo" 
             style="position: absolute; top: 15px; right: 15px; width: 50px; border-radius: 5px;">

        <h2 style="font-family: 'Fredoka One'; color: var(--primary); margin-top: 10px;">Support Edu-k üåü</h2>
        <p style="color: #666; margin-bottom: 20px;">Help us keep learning free for kids!</p>
        
        <div style="background: #f9f9f9; padding: 20px; border-radius: 15px; text-align: left; border: 1px solid #eee;">
            <p style="margin: 5px 0; display: flex; align-items: center;">
                <strong>Bank:</strong>&nbsp;OPay 
                <span style="background: #22e08e; color: white; font-size: 0.6rem; padding: 2px 6px; border-radius: 10px; margin-left: 8px;">Verified</span>
            </p>
            
            <!-- ACCOUNT NUMBER WITH COPY BUTTON -->
            <p style="margin: 10px 0; display: flex; justify-content: space-between; align-items: center; background: #fff; padding: 10px; border-radius: 10px; border: 1px solid #ddd;">
                <span><strong>Account No:</strong> <span id="acc-num">7046029852</span></span>
                <span id="copy-status" onclick="copyAccountNumber('7046029852')" style="cursor: pointer; background: #22e08e; color: white; padding: 5px 10px; border-radius: 8px; font-size: 0.8rem; font-weight: bold;">üìã Copy</span>
            </p>

            <p style="margin: 5px 0;"><strong>Account Name:</strong> DONALD ONIYAKACHI LOUIS</p>
        </div>
        
        <p id="copy-toast" style="font-size: 0.8rem; color: #22e08e; margin-top: 10px; font-weight: bold; display: none;">Copied to clipboard! ‚úÖ</p>
        <p style="font-size: 0.8rem; color: #999; margin-top: 15px;">Thanks for your kindness! üåü</p>
        
        <button onclick="playClick(); showPage('home')" style="margin-top: 20px; background: var(--primary); color: white; border: none; padding: 10px 25px; border-radius: 50px; cursor: pointer; font-weight: bold; width: 100%;">
            Back to Home
        </button>
    </div>
</div>

<div id="faq" class="page">
    <h2 style="font-family: 'Fredoka One'; color: var(--primary);">Edu-k Help Center</h2>
    <input type="text" id="faqSearchInput" onkeyup="searchFAQ()" placeholder="Type your question (e.g. sound, safe, stars)..." 
           style="width: 80%; max-width: 500px; padding: 15px; border-radius: 30px; border: 3px solid var(--secondary); margin-bottom: 30px; outline: none;">
    
    <div id="faqList" style="max-width: 700px; margin: 0 auto; text-align: left;">
        
        <!-- 1. General Info -->
        <div class="faq-item" style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 15px; border-left: 5px solid var(--secondary);">
            <h4 style="margin:0; color: var(--primary);">What is Edu-k?</h4>
            <p style="margin-top:10px; color: #555;">Edu-k is a fun learning tool for kids to master their ABCs and 123s through music and play!</p>
        </div>

        <div class="faq-item" style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 15px; border-left: 5px solid var(--secondary);">
            <h4 style="margin:0; color: var(--primary);">Who created Edu-k?</h4>
            <p style="margin-top:10px; color: #555;">Edu-k was founded by Louis Donald, a 17-year-old developer passionate about educational tech.</p>
        </div>

        <!-- 2. Safety & Privacy -->
        <div class="faq-item" style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 15px; border-left: 5px solid var(--secondary);">
            <h4 style="margin:0; color: var(--primary);">Is it safe for children?</h4>
            <p style="margin-top:10px; color: #555;">Yes! There are no ads or external distractions, making it a 100% safe environment for learning.</p>
        </div>

        <div class="faq-item" style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 15px; border-left: 5px solid var(--secondary);">
            <h4 style="margin:0; color: var(--primary);">Does Edu-k collect personal data?</h4>
            <p style="margin-top:10px; color: #555;">Privacy is our priority. We only store your name and photo locally on your device to personalize your experience.</p>
        </div>

        <!-- 3. Learning & Features -->
        <div class="faq-item" style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 15px; border-left: 5px solid var(--secondary);">
            <h4 style="margin:0; color: var(--primary);">What age group is this for?</h4>
            <p style="margin-top:10px; color: #555;">Edu-k is perfect for toddlers and preschoolers (ages 2‚Äì6) starting their educational journey.</p>
        </div>

        <div class="faq-item" style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 15px; border-left: 5px solid var(--secondary);">
            <h4 style="margin:0; color: var(--primary);">How does the Star Reward system work?</h4>
            <p style="margin-top:10px; color: #555;">Kids earn stars for every letter or number they tap! It encourages them to keep learning through positive feedback.</p>
        </div>

        <!-- 4. Technical Help -->
        <div class="faq-item" style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 15px; border-left: 5px solid var(--secondary);">
            <h4 style="margin:0; color: var(--primary);">Can I use Edu-k offline?</h4>
            <p style="margin-top:10px; color: #555;">Once the website is loaded, most features like the ABCs and Numbers work perfectly without internet!</p>
        </div>

        <div class="faq-item" style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 15px; border-left: 5px solid var(--secondary);">
            <h4 style="margin:0; color: var(--primary);">The sound is not working!</h4>
            <p style="margin-top:10px; color: #555;">Check if your device is on silent. You can also toggle "Background Music" in the settings gear ‚öôÔ∏è.</p>
        </div>

        <!-- 5. Future & Support -->
        <div class="faq-item" style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 15px; border-left: 5px solid var(--secondary);">
            <h4 style="margin:0; color: var(--primary);">How can I support Edu-k?</h4>
            <p style="margin-top:10px; color: #555;">You can share the app with friends or use the "Support" link in the About section to help us stay free.</p>
        </div>

        <div class="faq-item" style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 15px; border-left: 5px solid var(--secondary);">
            <h4 style="margin:0; color: var(--primary);">Are there more rhymes coming?</h4>
            <p style="margin-top:10px; color: #555;">Yes! Our founder Louis is regularly adding new high-quality songs and rhymes to the collection.</p>
        </div>

        <!-- 6. Premium Features & Rewards -->
<div class="faq-item" style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 15px; border-left: 5px solid var(--secondary);">
    <h4 style="margin:0; color: var(--primary);">Why did my stars stop at 10?</h4>
    <p style="margin-top:10px; color: #555;">To save more than 10 stars, you need to <b>Create a Profile</b>! This ensures your progress is saved safely so you can unlock bigger rewards like Bedtime Stories.</p>
</div>

<div class="faq-item" style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 15px; border-left: 5px solid var(--secondary);">
    <h4 style="margin:0; color: var(--primary);">How do I unlock Bedtime Stories?</h4>
    <p style="margin-top:10px; color: #555;">Each magic story costs <b>30 stars</b>. Once you earn enough by playing games, tap the story image to unlock it forever on your device!</p>
</div>

<!-- 7. Educational Activities -->
<div class="faq-item" style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 15px; border-left: 5px solid var(--secondary);">
    <h4 style="margin:0; color: var(--primary);">What is "Tracing Mode"?</h4>
    <p style="margin-top:10px; color: #555;">Tracing helps children develop <b>fine motor skills</b>. By following the ghost letters with their finger, they learn the actual motion of writing!</p>
</div>

<div class="faq-item" style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 15px; border-left: 5px solid var(--secondary);">
    <h4 style="margin:0; color: var(--primary);">Why does the Pencil Guide appear?</h4>
    <p style="margin-top:10px; color: #555;">If a child stops tracing for 4 seconds, our <b>AI Instructor</b> (the animated pencil) appears to show them exactly how to finish the shape.</p>
</div>

<!-- 8. Account & Security -->
<div class="faq-item" style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 15px; border-left: 5px solid var(--secondary);">
    <h4 style="margin:0; color: var(--primary);">Will I lose my stars if I logout?</h4>
    <p style="margin-top:10px; color: #555;">Yes. For security and privacy, logging out wipes the current session data. To keep your stars, we recommend staying logged in on your personal device.</p>
</div>

<div class="faq-item" style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 15px; border-left: 5px solid var(--secondary);">
    <h4 style="margin:0; color: var(--primary);">Is there a "Dark Mode" for night learning?</h4>
    <p style="margin-top:10px; color: #555;">Yes! Tap the ‚öôÔ∏è <b>Settings Gear</b> and toggle Dark Mode. This makes the screen softer on your child's eyes during bedtime stories.</p>
</div>

<!-- 9. Language & Navigation -->
<div class="faq-item" style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 15px; border-left: 5px solid var(--secondary);">
    <h4 style="margin:0; color: var(--primary);">Can my child learn in other languages?</h4>
    <p style="margin-top:10px; color: #555;">Edu-k 2026 supports <b>English, French, and Spanish</b>! You can change the language in the Settings menu at any time.</p>
</div>
<div class="faq-item" style="background: white; padding: 20px; border-radius: 15px; margin-bottom: 15px; border-left: 5px solid var(--secondary);">
    <h4 style="margin:0; color: var(--primary);">Should I expect new upgrades and versions from Edu-K?</h4>
    <p style="margin-top:10px; color: #555;">Edu-k 2026 version 2 <b>is on the way</b> with new improvement, because the producer is working on it. Remember to support using the account details and also share with friends to make Edu-K one of the best.</p>
</div>
        <div id="noResults" style="display:none; color: #777; font-style: italic;">No matching questions found. Try another word!</div>
        <!-- Inside <div id="faqList">, right after the 'noResults' div -->
<div id="submit-question-box" style="display:none; background: #fffde7; padding: 20px; border-radius: 15px; border: 2px dashed var(--primary); margin-top: 20px;">
    <h4 style="color: var(--primary); margin: 0 0 10px 0;">Can't find the answer?</h4>
    <p style="font-size: 0.9rem; color: #555;">Ask directly and you will get an email back!</p>
    
    <form action="https://formspree.io/f/xwvqjzqw" method="POST" id="faqContactForm">
        <textarea name="question" id="userQuestion" placeholder="Type your question here..." required 
                  style="width: 100%; padding: 10px; border-radius: 10px; border: 1px solid #ddd; margin-bottom: 10px; font-family: 'Quicksand';"></textarea>
        <button type="submit" style="background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: 25px; font-weight: bold; cursor: pointer;">
            Send Question üöÄ
        </button>
    </form>
</div>

    </div>
</div>
<!-- THE CEO MASCOT MESSAGE (CLEANED) -->
<div id="ceo-mascot-box" style="position: fixed; bottom: -600px; right: 20px; width: 280px; background: white; padding: 20px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); z-index: 10000; transition: 1s ease-in-out; border: 4px solid var(--secondary); text-align: center;">
    
    <!-- CEO Image -->
    <img src="image/boy-cartoon-character-running.jpg" style="width: 80px; height: 80px; border-radius: 50%; border: 3px solid var(--accent); margin-top: -50px; background: white;">
    
    <h4 style="font-family: 'Fredoka One'; color: var(--primary); margin: 10px 0 5px 0;">Message from Louis (CEO)</h4>
    
    <!-- This is the container the JavaScript will fill -->
    <div id="mascot-text" style="font-size: 0.9rem; color: #555; line-height: 1.4;">
        <!-- Leave this empty! JS will put the text and the RIGHT button here -->
    </div>
</div>



<footer style="background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); padding: 30px 20px; text-align: center; border-top: 4px solid var(--secondary); margin-top: auto;">
    <div style="max-width: 500px; margin: 0 auto;">
        <h3 style="font-family: 'Fredoka One'; color: var(--primary); margin-bottom: 10px;">Edu-k 2026</h3>
        <p style="font-size: 0.9rem; color: #666; line-height: 1.5;">Making learning fun for every little hero. üçé‚ú®</p>
        
        <!-- Quick Social Links (Directly to the Founder) -->
        <div style="margin: 15px 0; display: flex; justify-content: center; gap: 25px; font-size: 1.8rem;">
            <!-- Facebook -->
            <a href="https://facebook.com" target="_blank" style="text-decoration: none; transition: 0.3s;" title="Facebook">üìò</a>
            
            <!-- Instagram -->
            <a href="https://instagram.com" target="_blank" style="text-decoration: none; transition: 0.3s;" title="Instagram">üì∏</a>
            
            <!-- WhatsApp (Direct to CEO Louis) -->
            <a href="https://wa.me/07046029852üçé" 
               target="_blank" style="text-decoration: none; transition: 0.3s;" title="WhatsApp">üí¨</a>
        </div>

        <hr style="border: 0; border-top: 1px solid #ddd; margin: 15px 0;">
        
        <p style="font-size: 0.8rem; color: #999; font-weight: bold;">
            ¬© 2026 Edu-k ‚Äî Made with <span class="heart-pulse">‚ù§Ô∏è</span> by 
            <span onclick="showPage('about')" style="color: var(--primary); cursor: pointer; text-decoration: underline;">Louis Donald</span>
        </p>
    </div>
</footer>




<script>
    // Keep this at the top so ALL functions can see it
const dictionary = {
    en: { guest: "Hello Little Learner!", user: "Welcome, ", sub: "Tap a button to start!" },
    fr: { guest: "Bonjour Petit Apprenant!", user: "Bienvenue, ", sub: "Appuyez sur un bouton!" },
    es: { guest: "¬°Hola Peque√±o Aprendiz!", user: "Bienvenido, ", sub: "¬°Toca un bot√≥n!" }
};

    let currentAudio = null;
  const storyVault = {
    story1: {
        title: "The Boy Who Cried Wolf",
        text: "A bored shepherd boy thought it would be fun to trick the villagers. He ran to the top of the hill and shouted, 'Wolf! Wolf!' The villagers found no wolf. But one evening, a real wolf appeared! The boy learned that no one believes a liar, even when they tell the truth.",
        lesson: "üåü Lesson: Always tell the truth so people can trust you!"
    },
    story2: {
        title: "The Tortoise and the Hare",
        text: "The Hare was fast, but the Tortoise was steady. The Hare took a nap because he thought he had won. But the slow and steady Tortoise never stopped walking. When the Hare woke up, he saw the Tortoise crossing the finish line! Slow and steady wins the race.",
        lesson: "üåü Lesson: Don't give up! Being steady and patient helps you win."
    },
    story3: {
        title: "The Ant and the Grasshopper",
        text: "All summer, the Ant worked hard to store food. The Grasshopper just sang and played. When winter came, the Ant was warm and full, but the Grasshopper was hungry. The Ant shared a little, but the Grasshopper learned that hard work pays off!",
        lesson: "üåü Lesson: Work hard today so you are ready for tomorrow!"
    },
    story4: {
        title: "The Princess Bed",
        text: "Princess Maya lived in a palace made of glass, but she could never sleep! Finally, she met an old owl who said, 'To sleep well, you must do one kind thing for someone else today.' Maya helped a lost kitten, and that night, she slept more soundly than ever before.",
        lesson: "üåü Lesson: Kindness makes your heart happy and helps you sleep well!"
    },
    story5: {
        title: "The Wise & Foolish Goat",
        text: "Two goats met on a very narrow bridge. The Foolish Goat tried to push the other away. But the Wise Goat lay down flat and said, 'Step over me carefully.' Both goats reached the other side safely. It is better to be kind than to be stubborn.",
        lesson: "üåü Lesson: It is better to be wise and helpful than to fight."
    },
    story6: {
        title: "The Moon and The Star",
        text: "One night, a tiny Star started to cry. The big Moon asked, 'Why are you sad?' The Star replied, 'I am so small!' The Moon smiled and said, 'Without you, the night sky would be empty. You are the diamonds that make the world wonder.' The Star shone brighter than ever.",
        lesson: "üåü Lesson: You are special and important exactly as you are!"
    }
};


    let lastPlayedFile = "";
    let musicStarted = false;
    let gameVolume = localStorage.getItem('eduK_gameVolume') || 1;
    let stars = 0;
    let clickedLetters = new Set();
    let clickedNumbers = new Set();

    // 1. NAVIGATION & UI LOGIC
    function handleFirstClick() {
        if (!musicStarted) {
            const bg = document.getElementById('bg-music');
            if (bg) { bg.volume = 0.3; bg.play().catch(() => {}); }
            musicStarted = true;
        }
    }

    function toggleSettings(e) {
        e.stopPropagation();
        const menu = document.getElementById('settingsMenu');
        if (menu) menu.style.display = (menu.style.display === 'block') ? 'none' : 'block';
    }

   function updateGameVolume() {
    gameVolume = document.getElementById('gameVolume').value;
    document.getElementById('volumeLabel').innerText = "Volume: " + Math.round(gameVolume * 100) + "%";
    localStorage.setItem('eduK_gameVolume', gameVolume);
    
    // Play a quick test click so the user hears the new volume
    const test = new Audio('sounds/click.mp3');
    test.volume = gameVolume;
    test.play().catch(() => {});
}

function shareEduK() {
    const shareUrl = window.location.href;
    const shareData = {
        title: 'Edu-k: Learning is Fun!',
        text: 'Check out this cool app for kids built by a 17-year-old developer!',
        url: shareUrl
    };

    if (navigator.share) {
        // MOBILE: Opens the real share menu (WhatsApp, etc.)
        navigator.share(shareData).catch((err) => console.log('Share failed', err));
    } else {
        // COMPUTER: Copy to clipboard AND show a clear message
        navigator.clipboard.writeText(shareUrl).then(() => {
            // This alert tells the user EXACTLY what to do next
            alert("üöÄ Link Copied to Clipboard!\n\nNow you can go to WhatsApp or Facebook and press 'Paste' (Ctrl+V) to share Edu-k with your friends!");
        }).catch(err => {
            console.error('Could not copy text: ', err);
        });
    }
}
 // --- 2. THE MASTER UNLOCK FUNCTION (Accurate & Error-Free) ---
function tryUnlock(storyId) {
    const storyData = storyVault[storyId];
    if (!storyData) return;

    let unlockedStories = JSON.parse(localStorage.getItem('eduK_unlocked')) || [];

    // A. Check if already unlocked
    if (unlockedStories.includes(storyId)) {
        openStory(storyData.title, storyData.text, storyData.lesson);
        return;
    }

    // B. Check for 30 Stars
    if (stars >= 30) {
        // SUCCESS: Spend Stars
        stars -= 30; 
        document.getElementById('star-count').innerText = stars;
        unlockedStories.push(storyId);
        
        localStorage.setItem('eduK_unlocked', JSON.stringify(unlockedStories));
        localStorage.setItem('eduK_stars', stars);

        // Visual Unlock
        const card = document.getElementById(storyId);
        if (card) card.classList.replace('locked', 'unlocked');
        
        // Victory Sound & Mascot Cheer
        new Audio('sounds/hurray.mp3').play().catch(() => {});
        louisSpeaks(`<b>Whoosh!</b> üöÄ<br>You spent 30 stars! Enjoy your story, <b>${localStorage.getItem('eduK_user') || 'friend'}</b>! üìñüåü`);
        
        openStory(storyData.title, storyData.text, storyData.lesson);
    } else {
        // FAIL: Not enough stars (Use the Master Mascot Function)
        louisSpeaks("<b>Wait!</b> üõë<br>You need <b>30 stars</b> to unlock this story. Go practice your Letters & Numbers to earn more! ‚≠ê");
        playClick(); 
    }
}

function openStory(title, content, lesson) {
    const grid = document.getElementById('storiesGrid');
    const reader = document.getElementById('storyReader');
    const lessonEl = document.getElementById('readerLesson');

    if (grid) grid.style.display = 'none';
    if (reader) {
        reader.style.display = 'block';
        document.getElementById('readerTitle').innerText = title;
        document.getElementById('readerBody').innerText = content;
        
        // Only try to change the lesson if the box actually exists
        if (lessonEl) {
            lessonEl.innerText = lesson || "";
            lessonEl.style.display = lesson ? "block" : "none";
        }
    }
    window.scrollTo(0,0);
}


function closeStory() {
    const grid = document.getElementById('storiesGrid');
    const reader = document.getElementById('storyReader');
    if (grid) grid.style.display = 'grid';
    if (reader) reader.style.display = 'none';
}

// --- 4. THE MASTER MASCOT BRAIN (Always adds the button!) ---
function louisSpeaks(message, buttonText = "Got It, Louis! ‚ú®") {
    const mascotBox = document.getElementById('ceo-mascot-box');
    const mascotText = document.getElementById('mascot-text');

    if (mascotBox && mascotText) {
        // Wipe everything clean first
        mascotText.innerHTML = ""; 

        // Add the message and the big long button
        mascotText.innerHTML = `
            <p style="margin-bottom:15px; font-size: 0.95rem; line-height: 1.4;">${message}</p>
            <button id="got-it-btn" onclick="closeMascotWelcome()" style="background:var(--secondary); color:white; border:none; padding:12px 25px; border-radius:50px; font-weight:bold; cursor:pointer; width:100%; display:block; margin-top:10px;">${buttonText}</button>
        `;

        // Slide Louis up
        mascotBox.style.bottom = "20px";
        new Audio('sounds/click.mp3').play().catch(() => {});
    }
}

function closeMascotWelcome() {
    const mascotBox = document.getElementById('ceo-mascot-box');
    if (mascotBox) {
        mascotBox.style.bottom = "-600px"; 
        new Audio('sounds/click.mp3').play().catch(() => {});
    }
}

// --- 3. THE RHYME UNLOCK FUNCTION (Master Mascot Integrated) ---
let unlockedRhymes = JSON.parse(localStorage.getItem('eduK_unlockedRhymes')) || [];

function tryUnlockRhyme(rhymeId, fileName) {
    // 1. If already bought, just play!
    if (unlockedRhymes.includes(rhymeId)) {
        playRhyme(fileName);
        return;
    }

    // 2. Check if user has 10 stars
    if (stars >= 10) {
        stars -= 10; 
        document.getElementById('star-count').innerText = stars;
        unlockedRhymes.push(rhymeId);
        
        // Save to memory
        localStorage.setItem('eduK_unlockedRhymes', JSON.stringify(unlockedRhymes));
        localStorage.setItem('eduK_stars', stars);

        // A. THE FADE-OUT EFFECT
        const card = document.getElementById(rhymeId);
        const lockBubble = card ? card.querySelector('.lock-bubble') : null;
        if (lockBubble) {
            lockBubble.classList.add('fade-out-lock');
            setTimeout(() => { lockBubble.style.display = 'none'; }, 800);
        }
        
        if (card) card.classList.remove('locked');
        
        // B. SOUND & MASCOT CELEBRATION (Using Master Function)
        new Audio('sounds/hurray.mp3').play().catch(() => {});
        
        louisSpeaks("<b>Awesome!</b> üéµ<br>You spent 10 stars to unlock this new rhyme. Let's dance!");

        playRhyme(fileName);
    } else {
        // C. FAIL: Not enough stars (Using Master Function)
        louisSpeaks("<b>Wait!</b> ‚≠ê<br>You need 10 stars to unlock this rhyme. Play more ABCs and 123 to earn more!");
    }
}

   // 1. DELETE THAT EMPTY 'LOAD' EVENT AT THE TOP.

// 2. KEEP YOUR TOGGLE FUNCTIONS OUTSIDE
function toggleDarkMode() {
    const isDark = document.getElementById('darkModeToggle').checked;
    document.body.classList.toggle('dark-theme', isDark);
    localStorage.setItem('eduK_darkMode', isDark);
}

// --- 4. THE MASTER LAUNCH SEQUENCE (UPDATED WITH CEO WELCOME) ---
window.addEventListener('load', () => {

    // 1. Initial State (Theme & Profile)
    const isDark = localStorage.getItem('eduK_darkMode') === "true";
    if (isDark) {
        document.body.classList.add('dark-theme');
        const darkBtn = document.getElementById('darkModeToggle');
        if (darkBtn) darkBtn.checked = true;
    }

    // 2. Prep UI (Ready before the book opens!)
    applyTranslations();
    const savedName = localStorage.getItem('eduK_user');
    const savedBday = localStorage.getItem('eduK_bday');
    const savedPhoto = localStorage.getItem('eduK_photo');
    updateProfileUI(savedName, savedBday, savedPhoto);

    // 3. Generate Grids (ABCs & 123s)
    const abcGrid = document.getElementById('abcGrid');
    if (abcGrid) {
        abcGrid.innerHTML = "";
        "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").forEach(l => {
            abcGrid.innerHTML += `<div class="item-card" onclick="playSound('${l}')">${l}</div>`;
        });
    }
    
    const numGrid = document.getElementById('numGrid');
    if (numGrid) {
        numGrid.innerHTML = "";
        const nums = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10"];
        nums.forEach(n => {
            numGrid.innerHTML += `<div class="item-card" onclick="playSound('${n}')">${n}</div>`;
        });
    }

    // 4. Persistence (Rhymes & Stories)
    const unlockedRhymes = JSON.parse(localStorage.getItem('eduK_unlockedRhymes')) || [];
    unlockedRhymes.forEach(id => {
        const card = document.getElementById(id);
        if (card) {
            card.classList.remove('locked');
            const bubble = card.querySelector('.lock-bubble');
            if (bubble) bubble.style.display = 'none';
        }
    });

    const unlockedStories = JSON.parse(localStorage.getItem('eduK_unlocked')) || [];
    unlockedStories.forEach(id => {
        const el = document.getElementById(id);
        if (el) el.classList.replace('locked', 'unlocked');
    });

    // 5. Load Settings (Volume, Notifs, Stars)
    const savedVol = localStorage.getItem('eduK_gameVolume') || 1;
    const volSlider = document.getElementById('gameVolume');
    if (volSlider) {
        volSlider.value = savedVol;
        const volLabel = document.getElementById('volumeLabel');
        if (volLabel) volLabel.innerText = "Volume: " + Math.round(savedVol * 100) + "%";
    }

    const savedNotifs = localStorage.getItem('eduK_notifs') === "true";
    const notifToggle = document.getElementById('notifToggle');
    if (notifToggle) notifToggle.checked = savedNotifs;

    stars = parseInt(localStorage.getItem('eduK_stars')) || 0;
    const starDisplay = document.getElementById('star-count');
    if (starDisplay) starDisplay.innerText = stars;

    // 8. LOADER PROGRESSION (Final Step)
let percent = 0;
const loaderScreen = document.getElementById('loader-screen');
const percentText = document.getElementById('loader-percent');
const loaderBar = document.getElementById('loader-bar');

const interval = setInterval(() => {
    percent += 1;
    if (percentText) percentText.innerText = percent + "%";
    if (loaderBar) loaderBar.style.width = percent + "%";
    
    if (percent >= 100) {
        clearInterval(interval);
        
        // A. Fade out loader
        if (loaderScreen) {
            loaderScreen.style.transition = "1s ease-in-out";
            loaderScreen.style.opacity = "0";
            setTimeout(() => { loaderScreen.style.display = "none"; }, 1500);
        }
        
        // B. Reveal content
        document.querySelectorAll('nav, .page, footer, #star-counter').forEach(el => {
            el.classList.add('reveal-content');
        });

        // C. THE CEO WELCOME (CLEAN CALL)
        // Wait 2 seconds for the book to open, then trigger the function
        setTimeout(triggerCEOWelcome, 2000); 
    }
}, 50);
});
function triggerCEOWelcome() {
    const mascotBox = document.getElementById('ceo-mascot-box');
    const mascotText = document.getElementById('mascot-text');
    const name = localStorage.getItem('eduK_user') || "Little Learner";

    if (mascotBox && mascotText) {
        // --- THE NUCLEAR WIPE ---
        // This stops the "Second Button" bug forever
        mascotText.innerHTML = ""; 
        
        // NOW ADD ONLY THE CONTENT YOU WANT
        mascotText.innerHTML = `
            <b>Hi ${name}! I'm Louis, the CEO!</b> üß∏üëã<br><br>
            Welcome to Edu-k! Here is how to play:<br>
            1. Use the <b>Search Bar</b> below to ask me anything!<br>
            2. Use the <b>Buttons at the Top</b> to explore ABCs and Stories.<br>
            3. Tap the <b>‚öôÔ∏è Gear Icon</b> for volume and Dark Mode.<br><br>
            Don't forget to <b>Login</b> to save your stars and unlock everything! üöÄ "Remember I'm here to guide you."<br><br>
            <button id="got-it-btn" onclick="closeMascotWelcome()" style="background:var(--secondary); color:white; border:none; padding:12px 25px; border-radius:50px; font-weight:bold; cursor:pointer; width:100%; margin-top:10px; display:block;">Got It, Louis! ‚ú®</button>
        `;

        mascotBox.style.bottom = "20px";
        new Audio('sounds/click.mp3').play().catch(() => {});
    }
}
function closeMascotWelcome() {
    const mascotBox = document.getElementById('ceo-mascot-box');
    if (mascotBox) {
        mascotBox.style.bottom = "-600px"; // Hide him deep!
        new Audio('sounds/click.mp3').play().catch(() => {});
    }
}

// Ensure hideMascot also does the same thing for safety
function hideMascot() { closeMascotWelcome(); }

function louisSpeaks(message, buttonText = "Got It, Louis! ‚ú®") {
    const mascotBox = document.getElementById('ceo-mascot-box');
    const mascotText = document.getElementById('mascot-text');

    if (mascotBox && mascotText) {
        // 1. WIPE EVERYTHING (Clean slate)
        mascotText.innerHTML = ""; 

        // 2. ADD THE MESSAGE + THE BUTTON
        mascotText.innerHTML = `
            <p style="margin-bottom:15px;">${message}</p>
            <button onclick="closeMascotWelcome()" style="background:var(--secondary); color:white; border:none; padding:10px 20px; border-radius:50px; font-weight:bold; cursor:pointer; width:100%; display:block;">${buttonText}</button>
        `;

        // 3. SLIDE UP
        mascotBox.style.bottom = "20px";
        new Audio('sounds/click.mp3').play().catch(() => {});
    }
}



    window.onclick = () => {
        const menu = document.getElementById('settingsMenu');
        if (menu) menu.style.display = 'none';
    };

    function toggleMusic() {
        const bg = document.getElementById('bg-music');
        if (bg) {
            document.getElementById('musicToggle').checked ? bg.play() : bg.pause();
        }
    }

function showPage(pageId) {
    // 1. Reset Audio if leaving Rhymes
    if (pageId !== 'rhymes' && currentAudio) {
        currentAudio.pause();
        currentAudio.currentTime = 0;
        const bg = document.getElementById('bg-music');
        if (bg) bg.volume = 0.3;
    }

    // 2. Hide ALL pages first
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));

    // 3. Show target page
    const target = document.getElementById(pageId);
    if (target) {
        target.classList.add('active');
        
        // --- FIX FOR STORIES PAGE ---
        if (pageId === 'stories') {
            const grid = document.getElementById('storiesGrid');
            const reader = document.getElementById('storyReader');
            if (grid) grid.style.display = 'grid'; // Ensure grid is visible
            if (reader) reader.style.display = 'none'; // Ensure reader starts closed
        }
    }
    window.scrollTo(0,0);
}



    function playClick() {
    const clickSound = new Audio('sounds/click.mp3');
    clickSound.volume = 0.3; // Keep it subtle so it's not annoying
    clickSound.play().catch(err => console.log("Sound file click.mp3 not found!"));
}


   // 2. PROFILE & LOGOUT LOGIC (Updated for CEO Louis)
function updateProfileUI(name, bday, photo) {
    const loginBtn = document.getElementById('login-nav-btn');
    const welcomeMsg = document.getElementById('welcome-message');
    const welcomeSub = document.getElementById('welcome-subtext');
    const logoutSection = document.getElementById('profile-logout-section');

    if (name) {
        // --- MEMBER MODE ---
        if (welcomeMsg) welcomeMsg.innerText = "Welcome, " + name + "!";
        if (welcomeSub) welcomeSub.innerText = "Ready to learn and have fun?";
        
        // Show the Logout Button we added to the Profile Page
        if (logoutSection) logoutSection.style.display = "block";

        if (loginBtn) {
            loginBtn.innerText = "Your Profile üé®"; // Changed to 'Your Profile' since they are logged in
            loginBtn.onclick = () => showPage('login');
        }
        
        // Switch the login page to "View Profile" mode
        const fields = document.getElementById('profile-fields');
        const profileView = document.getElementById('logged-in-profile');
        const submitBtn = document.getElementById('submit-btn');
        const loginTitle = document.getElementById('login-title');

        if (fields) fields.style.display = 'none';
        if (profileView) profileView.style.display = 'block';
        if (submitBtn) submitBtn.style.display = 'none';
        if (loginTitle) loginTitle.innerText = "Your Edu-k Profile";

        if (document.getElementById('display-name')) document.getElementById('display-name').innerText = name;
        if (document.getElementById('display-bday') && bday) document.getElementById('display-bday').innerText = "Birthday: " + bday;
        
        // Final check for the photo
        const displayPhoto = document.getElementById('display-photo');
        if (displayPhoto && photo) displayPhoto.src = photo;

    } else {
        // --- GUEST MODE ---
        if (welcomeMsg) welcomeMsg.innerText = "Welcome, Little Learner!";
        if (welcomeSub) welcomeSub.innerText = "Login to save your stars! ‚≠ê";
        
        // Hide the Logout Button because guests aren't logged in!
        if (logoutSection) logoutSection.style.display = "none";

        if (loginBtn) {
            loginBtn.innerText = "Login üîê";
            loginBtn.onclick = () => showPage('login');
        }

        // Reset the form for a new signup
        const fields = document.getElementById('profile-fields');
        const profileView = document.getElementById('logged-in-profile');
        const submitBtn = document.getElementById('submit-btn');
        const loginTitle = document.getElementById('login-title');

        if (fields) fields.style.display = 'block';
        if (profileView) profileView.style.display = 'none';
        if (submitBtn) submitBtn.style.display = 'block';
        if (loginTitle) loginTitle.innerText = "Create Your Profile";
    }
}

function copyAccountNumber(text) {
    // 1. Modern Clipboard API
    if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(text).then(() => {
            triggerCopyFeedback();
        });
    } else {
        // 2. Fallback for older Browsers/iPhones
        let textArea = document.createElement("textarea");
        textArea.value = text;
        document.body.appendChild(textArea);
        textArea.select();
        try {
            document.execCommand('copy');
            triggerCopyFeedback();
        } catch (err) {
            console.error('Unable to copy', err);
        }
        document.body.removeChild(textArea);
    }
}

function triggerCopyFeedback() {
    const toast = document.getElementById('copy-toast');
    const copyBtn = document.getElementById('copy-status');
    
    if (toast) {
        toast.style.display = 'block';
        setTimeout(() => { toast.style.display = 'none'; }, 2500);
    }
    
    if (copyBtn) {
        copyBtn.innerText = "‚úÖ Done";
        setTimeout(() => { copyBtn.innerText = "üìã Copy"; }, 2500);
    }

    // CEO Mascot Celebration
    louisSpeaks("<b>Success!</b> üöÄ<br>The account number <b>7046029852</b> is now on your clipboard!");
}




  // --- 3. GAME & AUDIO LOGIC ---
function playSound(name) {
    // A. Reset current audio
    if (currentAudio) { 
        currentAudio.pause(); 
        currentAudio.currentTime = 0; 
    }
    
    // B. Initialize and play sound with Game Volume
    currentAudio = new Audio('sounds/' + name + '.mp3');
    currentAudio.volume = gameVolume; 
    
    currentAudio.play().catch(err => console.log("Sound file " + name + ".mp3 not found or blocked!"));

    // --- C. THE SMART STAR LIMIT (10-Star Guest Rule) ---
    const isMember = localStorage.getItem('eduK_user'); // Check if they are logged in

    if (!isMember && stars >= 10) {
        // GUEST LIMIT REACHED: Don't add more stars, just show the nudge
        const mascotBox = document.getElementById('ceo-mascot-box');
        const mascotText = document.getElementById('mascot-text');
        
        if (mascotBox && mascotText) {
            mascotText.innerHTML = "<b>Wow, you're fast!</b> üåü<br>You reached the 10-star Guest Limit. <b>Create a Profile</b> to save more stars and unlock Bedtime Stories!";
            mascotBox.style.bottom = "20px";
            // Hide mascot automatically after 8 seconds so it's not annoying
            setTimeout(() => { mascotBox.style.bottom = "-400px"; }, 8000);
        }
    } else {
        // MEMBER OR UNDER LIMIT: Add the star
        stars++;
        localStorage.setItem('eduK_stars', stars);
        
        const starDisplay = document.getElementById('star-count');
        if (starDisplay) starDisplay.innerText = stars;

        // D. Track progress for Alphabet/Numbers completion
        if (isNaN(name)) {
            clickedLetters.add(name);
        } else {
            clickedNumbers.add(name);
        }

        // Victory Triggers
        if (clickedLetters.size === 26) { 
            triggerVictory("Alphabet Complete! Hurray! üçé"); 
            clickedLetters.clear(); 
        }
        if (clickedNumbers.size === 10) { 
            triggerVictory("Numbers Complete! Hurray! üîü"); 
            clickedNumbers.clear(); 
        }
    }
}

    function playRhyme(fileName) {
        const bg = document.getElementById('bg-music');
        if (currentAudio && !currentAudio.paused && lastPlayedFile === fileName) {
            currentAudio.pause(); 
            if (bg) bg.volume = 0.2; 
            return;
        }
        if (currentAudio) currentAudio.pause();
        currentAudio = new Audio('sounds/' + fileName + '.mp3');
        lastPlayedFile = fileName;
        if (bg) bg.volume = 0.05;
        currentAudio.play();
        currentAudio.onended = () => { 
            if (bg) bg.volume = 0.2; 
            lastPlayedFile = ""; 
            triggerVictory("Rhyme Finished!"); 
        };
    }

    function triggerVictory(message) {
        new Audio('sounds/hurray.mp3').play().catch(() => {});
        const container = document.getElementById('confetti-container');
        if (container) {
            const colors = ['#FF6B6B', '#4ECDC4', '#FFE66D', '#FF9F43', '#A29BFE'];
            for (let i = 0; i < 150; i++) {
                const piece = document.createElement('div');
                piece.classList.add('piece');
                piece.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                piece.style.left = Math.random() * 100 + 'vw';
                piece.style.top = (Math.random() * 20 + 40) + 'vh';
                piece.style.animation = `jubilate ${Math.random() * 3 + 2}s ease-out forwards`;
                container.appendChild(piece);
                setTimeout(() => piece.remove(), 5000);
            }
        }
        alert(message);
    }

   // 1. The "Bridge" - Moves user from Home to FAQ
function goToFAQ() {
    const homeInput = document.getElementById('homeSearchInput');
    if (homeInput) {
        const query = homeInput.value;
        showPage('faq'); // Switches the page
        
        const faqInput = document.getElementById('faqSearchInput');
        if (faqInput) {
            faqInput.value = query;
            searchFAQ(); // Runs the filter immediately
        }
    }
}

// 2. The "Filter" - Searches and shows the "Submit" box if empty
function searchFAQ() {
    let input = document.getElementById('faqSearchInput');
    let filter = input.value.toUpperCase();
    let items = document.getElementsByClassName('faq-item');
    let noResults = document.getElementById('noResults');
    let submitBox = document.getElementById('submit-question-box');
    let found = false;

    for (let i = 0; i < items.length; i++) {
        let text = items[i].innerText.toUpperCase();
        if (text.indexOf(filter) > -1) {
            items[i].style.display = "";
            found = true;
        } else {
            items[i].style.display = "none";
        }
    }

    // --- THIS IS THE PART YOU WERE FIXING ---
    if (!found && filter !== "") {
        if (noResults) noResults.style.display = "block";
        if (submitBox) submitBox.style.display = "block";
    } else {
        if (noResults) noResults.style.display = "none";
        if (submitBox) submitBox.style.display = "none";
    }
}

function setupNotifications() {
    const isChecked = document.getElementById('notifToggle').checked;

    if (isChecked) {
        // 1. Ask for permission
        Notification.requestPermission().then(permission => {
            if (permission === "granted") {
                localStorage.setItem('eduK_notifs', "true");
                showWelcomeNotif();
            } else {
                alert("Oh no! Notifications are blocked. Please enable them in your browser settings to get reminders. üõë");
                document.getElementById('notifToggle').checked = false;
            }
        });
    } else {
        localStorage.setItem('eduK_notifs', "false");
        console.log("Reminders turned off.");
    }
}

function showWelcomeNotif() {
    const name = localStorage.getItem('eduK_user') || "Little Learner";
    
    // 2. Send an immediate "Test" notification
    new Notification("Edu-k Reminders Active! üîî", {
        body: `Hi ${name}! We'll let you know when it's time for more ABC fun.`,
    });
}

   function enableProfileEdit() {
    const name = localStorage.getItem('eduK_user');
    const bday = localStorage.getItem('eduK_bday');

    document.getElementById('userName').value = name;
    document.getElementById('userBirthday').value = bday;

    document.getElementById('profile-fields').style.display = 'block';
    document.getElementById('submit-btn').style.display = 'block';
    document.getElementById('cancel-edit-btn').style.display = 'block'; // SHOW CANCEL
    document.getElementById('logged-in-profile').style.display = 'none';
    
    document.getElementById('login-title').innerText = "Update Your Profile";
    document.getElementById('submit-btn').innerText = "Save Changes ‚ú®";
}

function cancelProfileEdit() {
    // Just refresh the UI using the data already in memory
    const name = localStorage.getItem('eduK_user');
    const bday = localStorage.getItem('eduK_bday');
    const photo = localStorage.getItem('eduK_photo');
    
    // Switch back to the Profile View
    updateProfileUI(name, bday, photo);
    
    // Hide the cancel button again
    document.getElementById('cancel-edit-btn').style.display = 'none';
}

 // --- FORM SUBMISSION (Legal & Personalized) ---
const loginForm = document.getElementById('loginForm');
if (loginForm) {
    loginForm.addEventListener('submit', function(e) {
        e.preventDefault();

        // --- 1. LEGAL COMPLIANCE CHECK ---
        const agreeCheckbox = document.getElementById('legal-agree');
        if (!agreeCheckbox || !agreeCheckbox.checked) {
            // Use your Master Mascot function to explain why!
            louisSpeaks("<b>Wait!</b> üìú<br>Please visit the <b>Terms & Privacy</b> page and click 'I agree' to join the Edu-k family!");
            return; // STOP the signup if they haven't agreed
        }
        
        // --- 2. GET USER DATA ---
        const nameEl = document.getElementById('userName');
        const bdayEl = document.getElementById('userBirthday');
        const name = nameEl ? nameEl.value : "";
        const bday = bdayEl ? bdayEl.value : "";
        const photoInput = document.getElementById('userPhoto');

        // Initial save to LocalStorage
        localStorage.setItem('eduK_user', name);
        localStorage.setItem('eduK_bday', bday);

        const finishSignup = () => {
            fetch(this.action, {
                method: 'POST',
                body: new FormData(this),
                headers: { 'Accept': 'application/json' }
            }).then(() => {
                // 1. UPDATE THE UI IMMEDIATELY
                updateProfileUI(name, bday, localStorage.getItem('eduK_photo'));
                showPage('home');

                // 2. THE CELEBRATION (Mascot appears right away!)
                const mascotBox = document.getElementById('ceo-mascot-box');
                const mascotText = document.getElementById('mascot-text');
                
                if (mascotBox && mascotText) {
                    // Personalized message: Edu-k knows you now!
                    mascotText.innerHTML = `<b>Whoosh! We did it!</b> üöÄ<br><br>Hi <b>${name}</b>! Edu-k knows you now! üé®‚ú®<br><br>1. Your stars are safe!<br>2. You can unlock ALL stories!<br>3. Let's go learn!`;
                    
                    // Slide up the Mascot
                    mascotBox.style.bottom = "20px";
                    
                    // Trigger Sounds & Jubilations
                    new Audio('sounds/hurray.mp3').play().catch(() => {});
                    if (typeof triggerVictory === "function") triggerVictory("Profile Active! üéâ");
                }

                // 3. AUTO-HIDE MASCOT (After 12 seconds so they can read and play)
                setTimeout(() => { 
                    if(mascotBox) mascotBox.style.bottom = "-400px"; 
                }, 12000);

            }).catch(() => {
                // Fallback if the Formspree fetch fails
                showPage('home');
            });
        };

        // Handle Photo Upload then finish
        if (photoInput && photoInput.files && photoInput.files[0]) {
            const reader = new FileReader();
            reader.onload = (event) => {
                localStorage.setItem('eduK_photo', event.target.result);
                finishSignup();
            };
            reader.readAsDataURL(photoInput.files[0]);
        } else {
            finishSignup();
        }
    });
}


function handleLogout() {
    const mascotBox = document.getElementById('ceo-mascot-box');
    const mascotText = document.getElementById('mascot-text');
    const name = localStorage.getItem('eduK_user') || 'friend';

    if (mascotBox && mascotText) {
        // 1. WIPE THE BOX (No more ghost buttons!)
        mascotText.innerHTML = ""; 

        // 2. ADD THE "YES/NO" LOGIC (Using your brand colors)
        // Red for Logout (Warning), Mint for Stay (Success)
        mascotText.innerHTML = `
            <p style="margin-bottom:15px;"><b>Wait, ${name}!</b> üòü<br>If you logout now, you will lose your <b>${stars} stars</b> and all your unlocked stories! Are you sure?</p>
            
            <button onclick="finalLogoutStep()" style="background:#ff6b6b; color:white; border:none; padding:12px 25px; border-radius:50px; font-weight:bold; cursor:pointer; width:100%; display:block; margin-bottom:10px;">Yes, Logout üö™</button>
            
            <button onclick="closeMascotWelcome()" style="background:var(--secondary); color:white; border:none; padding:12px 25px; border-radius:50px; font-weight:bold; cursor:pointer; width:100%; display:block;">No, Stay & Play! ‚ú®</button>
        `;

        // 3. SLIDE UP
        mascotBox.style.bottom = "20px";
        new Audio('sounds/click.mp3').play().catch(() => {});
    }
}

// THE FINAL DESTRUCTION (Only runs if they click 'Yes')
function finalLogoutStep() {
    // Clear everything from the Magic Library
    localStorage.clear(); 
    // Reload the app to the 0% Loader screen
    window.location.reload(); 
}


function hideMascot() {
    const mascotBox = document.getElementById('ceo-mascot-box');
    if (mascotBox) mascotBox.style.bottom = "-400px";
}

function showPage(pageId) {
    if (pageId !== 'rhymes' && currentAudio) {
        currentAudio.pause();
        currentAudio.currentTime = 0;
        const bg = document.getElementById('bg-music');
        if (bg) bg.volume = 0.3;
    }
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    const target = document.getElementById(pageId);
    if (target) target.classList.add('active');
    window.scrollTo(0,0);
}

function changeLanguage() {
    const selector = document.getElementById('languageSelect');
    if (selector) {
        const choice = selector.value;
        localStorage.setItem('eduK_lang', choice);
        // We reload to clear the old memory and start fresh with the new language
        window.location.reload();
    }
}

function applyTranslations() {
    // 1. Get the language from memory (default to 'en')
    const lang = localStorage.getItem('eduK_lang') || 'en';
    const savedName = localStorage.getItem('eduK_user');
    
    // 2. Select the correct text from our dictionary
    const text = dictionary[lang] || dictionary.en;
    
    console.log("Edu-k is translating to: " + lang); // Check your F12 console for this!

    const title = document.getElementById('welcome-message');
    const sub = document.getElementById('welcome-subtext');
    const drop = document.getElementById('languageSelect');

    if (title) {
        // Force the text change
        title.innerText = savedName ? text.user + savedName + "!" : text.guest;
    }
    if (sub) {
        sub.innerText = text.sub;
    }
    if (drop) {
        drop.value = lang;
    }
}

// --- 1. GLOBAL TRACING VARIABLES ---
let isDrawing = false;
let inkPoints = 0; 
let REQUIRED_INK = 100; // Let this be dynamic
let traceList = [];
let currentIndex = 0;
let guideTimer;
let finishTimer; // Timer for multi-part letters/numbers
let canvas, ctx;

// --- 2. THE MAIN TRIGGER (Fixed Number Array) ---
function openTracing(mode) {
    console.log("Edu-k Tracing Started: " + mode);
    showPage('tracing-page');
    
    canvas = document.getElementById('paintCanvas');
    if (canvas) {
        ctx = canvas.getContext('2d');
        // Mouse Listeners
        canvas.onmousedown = startDraw;
        canvas.onmousemove = draw;
        canvas.onmouseup = endDraw;
        // Mobile Touch Listeners (Precise for iPhone)
        canvas.ontouchstart = (e) => { e.preventDefault(); startDraw(e.touches[0]); };
        canvas.ontouchmove = (e) => { e.preventDefault(); draw(e.touches[0]); };
        canvas.ontouchend = endDraw;
    }

    if (mode === 'ABC') {
        traceList = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");
    } else {
        traceList = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10"];
    }
    
    currentIndex = 0;
    loadTraceChar();
}

// --- 3. CHARACTER LOADER ---
function loadTraceChar() {
    clearCanvas();
    inkPoints = 0; 
    const char = traceList[currentIndex];
    const ghost = document.getElementById('ghost-char');
    const title = document.getElementById('trace-title');
    
    // Update Requirement: 10 needs more ink than a single digit
    REQUIRED_INK = (char === "10") ? 180 : 100;

    if (ghost) {
        ghost.innerText = char;
        ghost.style.fontSize = (char === "10") ? "180px" : "280px"; 
    }
    
    if (title) title.innerText = "Trace the: " + char;
    
    playSound(char); 
    startGuideReminder(); 
}

// --- 4. DRAWING ENGINE (With Multi-Stroke Logic) ---
function startDraw(e) {
    isDrawing = true;
    clearTimeout(finishTimer); // CANCEL the "Finished" timer if they start drawing again
    stopGuide();
    ctx.beginPath();
    ctx.lineWidth = 22; 
    ctx.lineCap = 'round';
    ctx.strokeStyle = '#4ECDC4'; 
    
    const rect = canvas.getBoundingClientRect();
    const x = (e.clientX || (e.touches && e.touches[0].clientX)) - rect.left;
    const y = (e.clientY || (e.touches && e.touches[0].clientY)) - rect.top;
    ctx.moveTo(x, y);
}

function draw(e) {
    if (!isDrawing) return;
    const rect = canvas.getBoundingClientRect();
    // Support for both mouse and touch
    const x = (e.clientX || (e.touches && e.touches[0].clientX)) - rect.left;
    const y = (e.clientY || (e.touches && e.touches[0].clientY)) - rect.top;
    ctx.lineTo(x, y);
    ctx.stroke();
    inkPoints++; 
}

function endDraw() {
    if (!isDrawing) return;
    isDrawing = false;

    // Wait 1.2 seconds (Grace period for multi-stroke like '10')
    clearTimeout(finishTimer);
    finishTimer = setTimeout(() => {
        const mascotBox = document.getElementById('ceo-mascot-box');
        const mascotText = document.getElementById('mascot-text');
        const userName = localStorage.getItem('eduK_user') || "Little Learner";

        if (inkPoints > REQUIRED_INK) {
            triggerVictory("Perfect! üåü");
            currentIndex++;

            setTimeout(() => {
                if (currentIndex < traceList.length) {
                    loadTraceChar();
                } else {
                    // --- REPLACED ALERT WITH MASCOT ---
                    if (mascotBox && mascotText) {
                        mascotText.innerHTML = `<b>WHOOSH! üöÄ</b><br>Amazing job, <b>${userName}</b>!<br>You finished the whole set and you are now a <b>Tracing Master!</b> ‚≠ê‚≠ê‚≠ê`;
                        mascotBox.style.bottom = "20px";
                        
                        // Play a special long cheer sound if you have one
                        new Audio('sounds/hurray.mp3').play().catch(() => {});
                        
                        // Auto-hide after 8 seconds and go home
                        setTimeout(() => { 
                            mascotBox.style.bottom = "-400px"; 
                            showPage('home');
                        }, 15000);
                    } else {
                        // Fallback if mascot element is missing
                        showPage('home');
                    }
                }
            }, 1000);

        } else if (inkPoints > 0) {
            // They drew a little, but didn't finish the whole shape
            const hint = document.getElementById('instructor-hint');
            if (hint) hint.innerText = "Don't stop! Finish the whole number! ‚úèÔ∏è";
            startGuideReminder(); 
        }
    }, 1200); 
}



// --- 5. HELPERS ---
function startGuideReminder() {
    clearTimeout(guideTimer);
    guideTimer = setTimeout(() => {
        const pencil = document.getElementById('pencil-guide');
        const tracePage = document.getElementById('tracing-page');
        if (pencil && tracePage && tracePage.classList.contains('active')) {
            pencil.style.display = 'block';
            pencil.style.animation = 'guideMove 3s infinite linear';
        }
    }, 4000);
}

function stopGuide() {
    clearTimeout(guideTimer);
    const pencil = document.getElementById('pencil-guide');
    if (pencil) {
        pencil.style.display = 'none';
        pencil.style.animation = 'none';
    }
}


function clearCanvas() {
    if (ctx && canvas) {
        // This wipes the drawing board 100% clean
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.beginPath(); // Resets the "pen" so no lines connect from old letters
    }
}
// --- MOVE THESE TO THE VERY BOTTOM ---

function confirmLogout() {
    console.log("CEO Mode: Confirming Logout...");
    const mascotBox = document.getElementById('ceo-mascot-box');
    const mascotText = document.getElementById('mascot-text');
    const name = localStorage.getItem('eduK_user') || "friend";

    if (mascotBox && mascotText) {
        mascotText.innerHTML = ""; 
        mascotText.innerHTML = `
            <p style="margin-bottom:15px;"><b>Wait, ${name}!</b> üòü<br>If you logout now, you will lose your <b>${stars} stars</b>! Are you sure?</p>
            <button onclick="finalLogoutStep()" style="background:#ff6b6b; color:white; border:none; padding:12px 25px; border-radius:50px; font-weight:bold; cursor:pointer; width:100%; display:block; margin-bottom:10px;">Yes, Logout üö™</button>
            <button onclick="closeMascotWelcome()" style="background:var(--secondary); color:white; border:none; padding:12px 25px; border-radius:50px; font-weight:bold; cursor:pointer; width:100%; display:block;">No, Stay & Play! ‚ú®</button>
        `;
        mascotBox.style.bottom = "20px";
        new Audio('sounds/click.mp3').play().catch(() => {});
    }
}

function finalLogoutStep() {
    console.log("CEO Mode: Executing Logout...");
    localStorage.clear(); 
    window.location.reload(); 
}


</script>


</body>
</html>




